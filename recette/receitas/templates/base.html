{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>{% block title %}Recette{% endblock %}</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
<style>
  /* Estilos para o menu off-canvas */
  .off-canvas-menu {
    transform: translateX(100%);
    transition: transform 0.3s ease-in-out;
  }
  .off-canvas-menu.open {
    transform: translateX(0);
  }
  .overlay {
    background-color: rgba(0, 0, 0, 0.5);
    transition: opacity 0.3s ease-in-out;
  }
  .overlay.hidden {
    opacity: 0;
    pointer-events: none;
  }
  /* Estilos para o botão hambúrguer */
  .hamburger-icon {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    width: 24px;
    height: 18px;
    cursor: pointer;
  }
  .hamburger-icon span {
    display: block;
    height: 2px;
    width: 100%;
    background: #D68E6E;
    border-radius: 9px;
    transition: all 0.3s ease-in-out;
  }
  .hamburger-icon.open span:nth-child(1) {
    transform: translateY(8px) rotate(45deg);
  }
  .hamburger-icon.open span:nth-child(2) {
    opacity: 0;
  }
  .hamburger-icon.open span:nth-child(3) {
    transform: translateY(-8px) rotate(-45deg);
  }
</style>
{% block extra_head %}{% endblock %}
</head>
<body class="bg-[#FEFBFB] text-[#242424] min-h-screen flex flex-col">
 
 <header class="flex items-center justify-around mt-[20px] font-[Lora] relative z-50">
      <div>
          <img class="w-[56px] object-contain" src="{% static 'img/Logo recette sntxt.png' %}" alt="logo header">
      </div>
      
      <nav class="hidden md:flex gap-[72px] text-[#242424] text-[16px]">
          <a href="{% url 'home' %}" class="hover:text-[#D68D6D]">Home</a>
          <a href="{% url 'lista_receitas' %}" class="hover:text-[#D68D6D]">Receitas</a>
          <a href="{% url 'sobre' %}" class="hover:text-[#D68D6D]">Sobre</a>
      </nav>
      
      <div class="flex items-center gap-6">
          {% if user.is_authenticated %}
              <button id="menu-toggle" type="button" class="flex items-center justify-center w-10 h-10 rounded-full bg-[#F3ECEC] hover:bg-[#e5d6d6] transition focus:outline-none">
                  <i class="fa-solid fa-user text-xl text-[#D68E6E]"></i>
              </button>
              <div id="user-menu" class="absolute top-full right-0 mt-2 w-40 bg-white rounded-lg shadow-lg py-2 z-50 hidden md:right-auto md:left-auto">
                  <a href="#" class="block px-4 py-2 text-[#242424] hover:bg-[#F3ECEC]">Perfil</a>
                  <a href="{% url 'minhas_favoritas' %}" class="block px-4 py-2 text-[#242424] hover:bg-[#F3ECEC]">Minhas Receitas</a>
                  <a href="{% url 'criar_receita' %}" class="block px-4 py-2 text-[#242424] hover:bg-[#F3ECEC]">Criar Receitas</a>
                  <a href="{% url 'gerar_receita_ia' %}" class="block px-4 py-2 text-[#242424] hover:bg-[#F3ECEC]">ChefIA</a>
                  <a href="{% url 'account_logout' %}" class="block px-4 py-2 text-[#D68E6E] hover:bg-[#F3ECEC]">Sair</a>
              </div>
          {% else %}
              <div class="hidden md:flex gap-[20px] w-[280px]">
                  <a href="{% url 'account_signup' %}" class="flex-1 font-[Lora] text-center px-4 py-2 bg-[#FEFBFB] text-[#D68D6D] rounded-lg shadow text-[16px] hover:bg-[#F3ECEC] transition">Cadastrar</a>
                  <a href="{% url 'account_login' %}" class="flex-1 font-[Lora] text-center px-4 py-2 bg-[#D68E6E] text-[#FEFBFB] rounded-lg shadow text-[16px] hover:bg-[#cd8061] transition">Login</a>
              </div>
          {% endif %}

          <button id="hamburger-toggle" type="button" class="md:hidden flex items-center justify-center w-10 h-10 rounded-full bg-[#F3ECEC] hover:bg-[#e5d6d6] transition focus:outline-none">
              <div class="hamburger-icon">
                  <span></span>
                  <span></span>
                  <span></span>
              </div>
          </button>
      </div>
  </header>

  <div id="overlay" class="fixed inset-0 bg-black opacity-0 hidden z-40"></div>

  <nav id="off-canvas-menu" class="fixed top-0 right-0 w-64 h-full bg-white shadow-lg z-50 off-canvas-menu p-6 flex flex-col">
      <div class="flex justify-end mb-8">
          <button id="close-off-canvas" class="text-[#242424] text-2xl focus:outline-none">
              <i class="fas fa-times"></i>
          </button>
      </div>
      <ul class="flex flex-col gap-6 text-[#242424] text-lg font-[Lora]">
          <li><a href="{% url 'home' %}" class="block hover:text-[#D68D6D]">Home</a></li>
          <li><a href="{% url 'lista_receitas' %}" class="block hover:text-[#D68D6D]">Receitas</a></li>
          <li><a href="{% url 'sobre' %}" class="block hover:text-[#D68D6D]">Sobre</a></li>
          
          {% if user.is_authenticated %}
              <li class="mt-4 border-t border-[#F3ECEC] pt-4">
                  <span class="block text-sm text-[#666666] mb-2">Gerenciar:</span>
                  <ul class="flex flex-col gap-3 text-base">
                      <li><a href="{% url 'lista_ingredientes' %}" class="block hover:text-[#D68D6D]">Ingredientes</a></li>
                      <li><a href="{% url 'criar_ingrediente' %}" class="block hover:text-[#D68D6D]">Novo Ingrediente</a></li>
                      <li><a href="{% url 'lista_receitas_ia' %}" class="block hover:text-[#D68D6D]">Receitas IA</a></li>
                  </ul>
              </li>
              <li>
                  <a href="{% url 'account_logout' %}" class="block px-4 py-2 text-[#D68E6E] hover:bg-[#F3ECEC] rounded-lg text-center">Sair</a>
              </li>
          {% else %}
              <li class="mt-4">
                  <a href="{% url 'account_signup' %}" class="block text-center px-4 py-2 bg-[#FEFBFB] text-[#D68D6D] rounded-lg shadow text-[16px] hover:bg-[#F3ECEC] transition">Cadastrar</a>
              </li>
              <li>
                  <a href="{% url 'account_login' %}" class="block text-center px-4 py-2 bg-[#D68E6E] text-[#FEFBFB] rounded-lg shadow text-[16px] hover:bg-[#cd8061] transition">Login</a>
              </li>
          {% endif %}
      </ul>
  </nav>

  <main class="flex-1">
      {% block content %}
       <!-- Conteúdo específico de cada página virá aqui  -->
      {% endblock %}
  </main>

  <footer class="bg-[#242424] text-[#FEFBFB] text-sm font-[Montserrat] mt-auto">
      <div class="container mx-auto px-4 py-6 flex flex-col md:flex-row items-center justify-between gap-4">
          <img src="{% static 'img/Logo recette footer.png' %}" alt="Logo" class="w-12" />
          <ul class="flex space-x-4 text-xs uppercase tracking-widest">
              <li><a href="{% url 'home' %}" class="hover:underline">Home</a></li>
              <li><a href="{% url 'lista_receitas' %}" class="hover:underline">Receitas</a></li>
              <li><a href="#" class="hover:underline">Sobre</a></li>
          </ul>
          <div class="flex space-x-3">
              <a href="#" aria-label="Instagram" class="hover:text-gray-300">
                  <i class="fab fa-instagram"></i>
              </a>
              <a href="#" aria-label="YouTube" class="hover:text-gray-300">
                  <i class="fab fa-youtube"></i>
              </a>
          </div>
      </div>
      <hr class="border-zinc-700" />
      <div class="text-center py-3 text-xs text-gray-400">
          &copy; 2023 Recette.
      </div>
  </footer>

  <script>
      document.addEventListener('DOMContentLoaded', function() {
          // Script do menu de usuário existente
          const userMenuToggle = document.getElementById('menu-toggle');
          const userMenu = document.getElementById('user-menu');
          
          if (userMenuToggle && userMenu) {
              userMenuToggle.addEventListener('click', function(e) {
                  e.stopPropagation();
                  userMenu.classList.toggle('hidden');
              });
              
              document.addEventListener('click', function() {
                  userMenu.classList.add('hidden');
              });
              
              userMenu.addEventListener('click', function(e) {
                  e.stopPropagation();
              });
          }

          // Script do menu hambúrguer (off-canvas)
          const hamburgerToggle = document.getElementById('hamburger-toggle');
          const offCanvasMenu = document.getElementById('off-canvas-menu');
          const closeOffCanvas = document.getElementById('close-off-canvas');
          const overlay = document.getElementById('overlay');

          function openMenu() {
              offCanvasMenu.classList.add('open');
              overlay.classList.remove('hidden');
              document.body.style.overflow = 'hidden'; // Previne scroll do body
          }

          function closeMenu() {
              offCanvasMenu.classList.remove('open');
              overlay.classList.add('hidden');
              document.body.style.overflow = ''; // Restaura scroll do body
          }

          if (hamburgerToggle && offCanvasMenu && closeOffCanvas && overlay) {
              hamburgerToggle.addEventListener('click', function() {
                  hamburgerToggle.querySelector('.hamburger-icon').classList.toggle('open');
                  openMenu();
              });

              closeOffCanvas.addEventListener('click', function() {
                  hamburgerToggle.querySelector('.hamburger-icon').classList.remove('open');
                  closeMenu();
              });

              overlay.addEventListener('click', function() {
                  hamburgerToggle.querySelector('.hamburger-icon').classList.remove('open');
                  closeMenu();
              });
          }
      });
  </script>
</body>
</html>
